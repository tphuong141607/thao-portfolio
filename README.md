## Supabase-backed content

Blog posts and craft projects now load exclusively from Supabase when the following environment variables are provided:

```
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"
```

Add them to `.env.local`, restart the dev server, and the site will sync with the tables below. Without these keys the UI renders empty states, so populate Supabase (or import the CSV seed files described below) before testing.

### Table definitions

Create the tables with SQL (adjust types or names as you see fit):

```sql
create table if not exists public.blog_posts (
  id bigint generated by default as identity primary key,
  slug text not null unique,
  title text not null,
  excerpt text,
  image text,
  category text,
  tags text[] default '{}',
  date date default current_date,
  author text,
  read_time_minutes int default 5,
  sections jsonb default '[]'::jsonb,
  created_at timestamptz default timezone('utc', now()),
  updated_at timestamptz default timezone('utc', now())
);

create table if not exists public.craft_projects (
  id bigint generated by default as identity primary key,
  slug text,
  title text not null,
  caption text,
  description text,
  tags text[] default '{}',
  image_src text,
  image_alt text,
  sort_order int default 0,
  created_at timestamptz default timezone('utc', now()),
  updated_at timestamptz default timezone('utc', now())
);

create table if not exists public.craft_case_studies (
  id bigint generated by default as identity primary key,
  slug text not null unique,
  category text,
  title text not null,
  subtitle text,
  overview jsonb default '[]'::jsonb,
  hero_shots jsonb default '[]'::jsonb,
  sections jsonb default '[]'::jsonb,
  created_at timestamptz default timezone('utc', now()),
  updated_at timestamptz default timezone('utc', now())
);

-- enable Row Level Security (default) and allow anonymous reads
alter table public.blog_posts enable row level security;
alter table public.craft_projects enable row level security;

create policy "Allow anon read blog posts"
  on public.blog_posts
  for select
  using (true);

create policy "Allow anon read craft projects"
  on public.craft_projects
  for select
  using (true);

create policy "Allow anon read craft case studies"
  on public.craft_case_studies
  for select
  using (true);
```

Populate them with your content either through the Supabase dashboard or SQL inserts. The `/blog/manage` and `/craft/manage` dashboards use these tables for CRUD operations.

### Sample data

Run the helper script to generate CSVs you can import into Supabase:

```bash
node scripts/export-supabase-csv.js
```

The files are written to `supabase_seed/` (`blog_posts.csv`, `craft_projects.csv`, `craft_case_studies.csv`).

## Getting Started

Install dependencies and start the dev server:

```bash
npm install
npm run dev
```

Visit [http://localhost:3000](http://localhost:3000) to view the site.
